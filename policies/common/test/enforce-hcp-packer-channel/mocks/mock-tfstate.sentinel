import "strings"
import "types"

outputs = {}

_modules = {
	"root": {
		"data":      {},
		"path":      [],
		"resources": {},
	},

	"module.webserver-ireland": {
		"data": {
			"aws_availability_zones": {
				"available": {
					0: {
						"attr": {
							"all_availability_zones": null,
							"exclude_names":          null,
							"exclude_zone_ids":       null,
							"filter":                 null,
							"group_names": [
								"eu-west-1",
							],
							"id": "eu-west-1",
							"names": [
								"eu-west-1a",
								"eu-west-1b",
								"eu-west-1c",
							],
							"state": "available",
							"zone_ids": [
								"euw1-az3",
								"euw1-az1",
								"euw1-az2",
							],
						},
						"depends_on": [],
						"id":         "eu-west-1",
						"tainted":    false,
					},
				},
			},
			"aws_ip_ranges": {
				"ec2_instance_connect": {
					0: {
						"attr": {
							"cidr_blocks": [
								"18.202.216.48/29",
							],
							"create_date":      "2022-03-30-00-03-20",
							"id":               "1648598600",
							"ipv6_cidr_blocks": [],
							"regions": [
								"eu-west-1",
							],
							"services": [
								"ec2_instance_connect",
							],
							"sync_token": 1648598600,
							"url":        "https://ip-ranges.amazonaws.com/ip-ranges.json",
						},
						"depends_on": [],
						"id":         "1648598600",
						"tainted":    false,
					},
				},
			},
			"aws_region": {
				"current": {
					0: {
						"attr": {
							"description": "Europe (Ireland)",
							"endpoint":    "ec2.eu-west-1.amazonaws.com",
							"id":          "eu-west-1",
							"name":        "eu-west-1",
						},
						"depends_on": [],
						"id":         "eu-west-1",
						"tainted":    false,
					},
				},
			},
			"hcp_packer_image": {
				"webserver": {
					0: {
						"attr": {
							"bucket_name":    "aws-webserver",
							"build_id":       "01FZ0ECEHPV7X7Z2XGDSAYNJ17",
							"cloud_image_id": "ami-03495f2d5a04d0a09",
							"cloud_provider": "aws",
							"component_type": "amazon-ebs.ubuntu",
							"created_at":     "2022-03-25T11:46:28.022Z",
							"id":             "01FZ0EVXHSWHW7H9JPZ9497XQS",
							"iteration_id":   "01FZ0ECE1CF0YH83T8YSNBFCPY",
							"labels": {
								"os":             "Ubuntu",
								"ubuntu-version": "Focal 20.04",
								"version":        "v0.1.1",
							},
							"organization_id": "ffa120a5-d7b1-4b9c-be17-33a71e45f43f",
							"packer_run_uuid": "e5ff88e4-6a76-a584-208e-836260a4a30c",
							"project_id":      "d6c96d2b-616b-4cb8-b78c-9e17a78c2167",
							"region":          "eu-west-1",
							"timeouts":        null,
						},
						"depends_on": [],
						"id":         "01FZ0EVXHSWHW7H9JPZ9497XQS",
						"tainted":    false,
					},
				},
			},
			"hcp_packer_iteration": {
				"webserver": {
					0: {
						"attr": {
							"author_id":   "terraform-hashibook",
							"bucket_name": "aws-webserver",
							"channel":     "production",
							"created_at":  "2022-03-25T11:46:27.500Z",
							"fingerprint": "v0.1.1-2022-03-25_11-46-25",
							"id":          "01FZ0ECE1CF0YH83T8YSNBFCPY",
							"incremental_version": 7,
							"organization_id":     "ffa120a5-d7b1-4b9c-be17-33a71e45f43f",
							"project_id":          "d6c96d2b-616b-4cb8-b78c-9e17a78c2167",
							"timeouts":            null,
							"ulid":                "01FZ0ECE1CF0YH83T8YSNBFCPY",
							"updated_at":          "2022-03-25T11:54:54.951Z",
						},
						"depends_on": [],
						"id":         "01FZ0ECE1CF0YH83T8YSNBFCPY",
						"tainted":    false,
					},
				},
			},
		},
		"path": [
			"webserver-ireland",
		],
		"resources": {},
	},

	"module.webserver-london": {
		"data": {
			"aws_availability_zones": {
				"available": {
					0: {
						"attr": {
							"all_availability_zones": null,
							"exclude_names":          null,
							"exclude_zone_ids":       null,
							"filter":                 null,
							"group_names": [
								"eu-west-2",
							],
							"id": "eu-west-2",
							"names": [
								"eu-west-2a",
								"eu-west-2b",
								"eu-west-2c",
							],
							"state": "available",
							"zone_ids": [
								"euw2-az2",
								"euw2-az3",
								"euw2-az1",
							],
						},
						"depends_on": [],
						"id":         "eu-west-2",
						"tainted":    false,
					},
				},
			},
			"aws_ip_ranges": {
				"ec2_instance_connect": {
					0: {
						"attr": {
							"cidr_blocks": [
								"3.8.37.24/29",
							],
							"create_date":      "2022-03-30-00-03-20",
							"id":               "1648598600",
							"ipv6_cidr_blocks": [],
							"regions": [
								"eu-west-2",
							],
							"services": [
								"ec2_instance_connect",
							],
							"sync_token": 1648598600,
							"url":        "https://ip-ranges.amazonaws.com/ip-ranges.json",
						},
						"depends_on": [],
						"id":         "1648598600",
						"tainted":    false,
					},
				},
			},
			"aws_region": {
				"current": {
					0: {
						"attr": {
							"description": "Europe (London)",
							"endpoint":    "ec2.eu-west-2.amazonaws.com",
							"id":          "eu-west-2",
							"name":        "eu-west-2",
						},
						"depends_on": [],
						"id":         "eu-west-2",
						"tainted":    false,
					},
				},
			},
			"hcp_packer_image": {
				"webserver": {
					0: {
						"attr": {
							"bucket_name":    "aws-webserver",
							"build_id":       "01FZ0ECEHPV7X7Z2XGDSAYNJ17",
							"cloud_image_id": "ami-06c49424ed0bf060e",
							"cloud_provider": "aws",
							"component_type": "amazon-ebs.ubuntu",
							"created_at":     "2022-03-25T11:46:28.022Z",
							"id":             "01FZ0EVXJ7JWJ0T0FVPGPHV16D",
							"iteration_id":   "01FZ0ECE1CF0YH83T8YSNBFCPY",
							"labels": {
								"os":             "Ubuntu",
								"ubuntu-version": "Focal 20.04",
								"version":        "v0.1.1",
							},
							"organization_id": "ffa120a5-d7b1-4b9c-be17-33a71e45f43f",
							"packer_run_uuid": "e5ff88e4-6a76-a584-208e-836260a4a30c",
							"project_id":      "d6c96d2b-616b-4cb8-b78c-9e17a78c2167",
							"region":          "eu-west-2",
							"timeouts":        null,
						},
						"depends_on": [],
						"id":         "01FZ0EVXJ7JWJ0T0FVPGPHV16D",
						"tainted":    false,
					},
				},
			},
			"hcp_packer_iteration": {
				"webserver": {
					0: {
						"attr": {
							"author_id":   "terraform-hashibook",
							"bucket_name": "aws-webserver",
							"channel":     "production",
							"created_at":  "2022-03-25T11:46:27.500Z",
							"fingerprint": "v0.1.1-2022-03-25_11-46-25",
							"id":          "01FZ0ECE1CF0YH83T8YSNBFCPY",
							"incremental_version": 7,
							"organization_id":     "ffa120a5-d7b1-4b9c-be17-33a71e45f43f",
							"project_id":          "d6c96d2b-616b-4cb8-b78c-9e17a78c2167",
							"timeouts":            null,
							"ulid":                "01FZ0ECE1CF0YH83T8YSNBFCPY",
							"updated_at":          "2022-03-25T11:54:54.951Z",
						},
						"depends_on": [],
						"id":         "01FZ0ECE1CF0YH83T8YSNBFCPY",
						"tainted":    false,
					},
				},
			},
		},
		"path": [
			"webserver-london",
		],
		"resources": {},
	},
}

module_paths = [
	[],
	[
		"webserver-ireland",
	],
	[
		"webserver-london",
	],
]

terraform_version = "1.1.7"

module = func(path) {
	if types.type_of(path) is not "list" {
		error("expected list, got", types.type_of(path))
	}

	if length(path) < 1 {
		return _modules.root
	}

	addr = []
	for path as p {
		append(addr, "module")
		append(addr, p)
	}

	return _modules[strings.join(addr, ".")]
}

data = _modules.root.data
path = _modules.root.path
resources = _modules.root.resources
